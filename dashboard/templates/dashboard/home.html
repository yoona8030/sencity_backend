{% load static %}

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>CCTV 관리</title>
    <link rel="stylesheet" href="{% static 'dashboard/css/style.css' %}" />
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        display: flex;
        height: 100vh;
      }
      .sidebar {
        width: 220px;
        background: #f2c94c;
        padding: 20px;
      }
      .sidebar h2 {
        margin-top: 0;
      }
      .main {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 20px;
      }
      .section {
        margin-bottom: 20px;
      }
      .flex {
        display: flex;
        gap: 20px;
      }
      .card {
        background: #fafafa;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 16px;
        flex: 1;
      }
      .device.online {
        color: green;
        font-weight: bold;
      }
      .device.offline {
        color: red;
        font-weight: bold;
      }
      .video-container img {
        border: 1px solid #ccc;
        border-radius: 8px;
        width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <!-- 왼쪽 메뉴 -->
    <div class="sidebar">
      <h2>SENCITY</h2>
      <ul>
        <li>대시보드</li>
        <li>CCTV 관리</li>
        <li>신고 처리 및 관리</li>
        <li>설정</li>
        <li>사용자 관리</li>
        <li>데이터 분석 및 통계</li>
        <li>콘텐츠 관리</li>
        <li>공지 설정</li>
      </ul>
    </div>

    <!-- 메인 -->
    <div class="main">
      <h1>CCTV 관리</h1>

      <div class="flex">
        <!-- CCTV 상태 -->
        <div class="card">
          <h2>CCTV 디바이스 현황</h2>
          <ul>
            {% for d in devices %}
            <li
              class="device {% if d.status == 'ONLINE' %}online{% else %}offline{% endif %}"
            >
              {{ d.name }} - {{ d.status }}
            </li>
            {% endfor %}
          </ul>
        </div>

        <!-- 실시간 영상 -->
        <div class="card">
          <h2>실시간 영상</h2>
          <div class="video-container">
            <img
              src="{% url 'dashboard:cctv-stream' %}?url=0"
              alt="실시간 영상"
            />
          </div>
        </div>
      </div>

      <!-- 모션 센서 -->
      <div class="section card">
        <h2>모션 센서</h2>
        <ul>
          {% for s in sensors %}
          <li>{{ s.device.name }} - {{ s.status }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </body>
</html>
